# Airflow Helm Values
executor: KubernetesExecutor

# Images
images:
  airflow:
    repository: apache/airflow
    tag: 2.9.0
    pullPolicy: IfNotPresent

# GIT SYNC (DAGS)
dags:
  gitSync:
    enabled: true
    repo: "https://github.com/Moiz-Ali-Moomin/microservice-ecommerce-gcp-cloud-gke-setup.git"
    branch: "main"
    subPath: "infra/airflow/dags"
    depth: 1
    # credentialsSecret: git-credentials # If needed

# LOGS (Persistence)
logs:
  persistence:
    enabled: true
    size: 10Gi
    storageClassName: standard-rwo

# DATABASE (External Postgres assumed via Secrets or PGBouncer)
data:
  metadataSecretName: airflow-metadata-secret # User must create this

# EXTERNAL DATABASE CONFIG (Disable Chart DB)
postgresql:
  enabled: false

# RBAC & ACCOUNT
rbac:
  create: true

serviceAccount:
  create: true
  name: "airflow-service-account"

# PROBES (Webserver/Scheduler/Workers)
scheduler:
  livenessProbe:
    initialDelaySeconds: 15
    periodSeconds: 30
    failureThreshold: 5
  readinessProbe:
    initialDelaySeconds: 15
    periodSeconds: 30
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

webserver:
  livenessProbe:
    initialDelaySeconds: 15
    periodSeconds: 30
    failureThreshold: 5
  readinessProbe:
    initialDelaySeconds: 15
    periodSeconds: 30
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

workers:
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

