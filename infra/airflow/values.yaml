executor: KubernetesExecutor

# Airflow Image (safe for all chart versions)
airflow:
  image:
    repository: us-central1-docker.pkg.dev/ecommerce-microservice-53/ecommerce-repo/airflow
    tag: custom
    pullPolicy: Always

images:
  airflow:
    repository: us-central1-docker.pkg.dev/ecommerce-microservice-53/ecommerce-repo/airflow
    tag: custom
    pullPolicy: Always

# DAGs via GitSync
dags:
  gitSync:
    enabled: true
    repo: https://github.com/Moiz-Ali-Moomin/microservice-ecommerce-gcp-cloud-gke-setup.git
    branch: main
    subPath: infra/airflow/dags
    depth: 1

# Logs persistence
logs:
  persistence:
    enabled: true
    size: 10Gi
    storageClassName: standard-rwo

# External Metadata DB
data:
  metadataSecretName: airflow-metadata-secret

postgresql:
  enabled: false

# Core secrets
fernetKeySecretName: airflow-secrets
webserverSecretKeySecretName: airflow-secrets

# RBAC
rbac:
  create: true

serviceAccount:
  create: true
  name: airflow-service-account

# Scheduler
scheduler:
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: "1"
      memory: 1Gi

# Webserver
webserver:
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: "1"
      memory: 1Gi
