{{define "content"}}
<div class="hero-section">
    <h2>Shop by Category</h2>
</div>

<!-- Category Tabs -->
<div class="category-tabs">
    <button class="tab-btn active" data-category="all">All Products</button>
    <button class="tab-btn" data-category="Electronics">Electronics</button>
    <button class="tab-btn" data-category="Fitness">Fitness</button>
    <button class="tab-btn" data-category="Fashion">Fashion</button>
    <button class="tab-btn" data-category="Home">Home & Living</button>
    <button class="tab-btn" data-category="Health">Health</button>
    <button class="tab-btn" data-category="Learning">Learning</button>
</div>

<div class="product-grid" id="product-grid">
    {{range .Offers}}
    <div class="product-card" data-category="{{.Category}}">
        <div class="product-image-placeholder">
            <img src="/static/images/placeholder.svg" alt="{{.Title}}">
        </div>
        <div class="product-info">
            <span class="category-tag">{{.Category}}</span>
            <h3>{{.Title}}</h3>
            <p class="description">{{.Description}}</p>
            <div class="price-row">
                <span class="price">${{.Payout}}</span>
                <form action="/cart/add" method="POST">
                    <input type="hidden" name="offer_id" value="{{.ID}}">
                    <button type="submit" class="btn-icon" title="Add to Cart">+</button>
                </form>
            </div>
        </div>
    </div>
    {{else}}
    <p>No products found. Check API Gateway connection.</p>
    {{end}}
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const tabs = document.querySelectorAll('.tab-btn');
        const products = document.querySelectorAll('.product-card');

        tabs.forEach(tab => {
            tab.addEventListener('click', function () {
                // Remove active class from all tabs
                tabs.forEach(t => t.classList.remove('active'));
                // Add active class to clicked tab
                this.classList.add('active');

                const category = this.getAttribute('data-category');

                products.forEach(product => {
                    if (category === 'all' || product.getAttribute('data-category') === category) {
                        product.style.display = 'block';
                    } else {
                        product.style.display = 'none';
                    }
                });
            });
        });
    });
</script>
{{end}}